<!--
  ~ **************************************************************************
  ~
  ~ Copyright: Robert Bosch Power Tools GmbH, 2020
  ~
  ~ **************************************************************************
  -->

<div class="ss-input ss-input-textarea-user"
     [ngClass]="getInputClasses()"
     [attr.data-automation]="automationAttr + '-wrapper'">
    <div *ngIf="user"
         class="ss-input-textarea-user__picture"
         [ssBackgroundImage]="user.picture"
         [attr.data-automation]="automationAttr + '-user-picture'">
    </div>
    <label [for]="inputId" class="ss-input-textarea-user__label">
        {{ label }}
    </label>
    <textarea class="ss-input-textarea-user__hidden"
              [attr.data-automation]="automationAttr + '-mirror'"
              [(ngModel)]="value"
              #inputTextareaHidden>
    </textarea>
    <textarea class="ss-input__input ss-input-textarea-user__input"
              [attr.data-automation]="automationAttr"
              [id]="inputId"
              [name]="name"
              [disabled]="isDisabled"
              [readonly]="isReadOnly"
              [maxlength]="maxCharacter"
              (change)="onInputChange()"
              (input)="onInputChange()"
              (focus)="onInputFocus($event)"
              (blur)="onInputBlur($event)"
              (keyup)="onInputKeyup()"
              [(ngModel)]="value"
              [ngStyle]="getStyle()"
              [placeholder]="getPlaceholder()"
              [ngClass]="getClasses()"
              #inputTextarea>
    </textarea>
    <span *ngIf="maxCharacter && showCounter"
          class="ss-input__character"
          [attr.data-automation]="automationAttr + '-character-counter'">
        {{characterNumber}}/{{maxCharacter}}
    </span>
    <span *ngIf="isInvalid() || isWarning() && !isInvalid()"
          [ngClass]="getFeedbackClasses()"
          [attr.data-automation]="automationAttr + getDataAutomation()">
        {{getErrorMessageKey() | translate:getErrorParams()}}
    </span>
</div>
